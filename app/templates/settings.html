{% extends "layout.html" %}
{% block content %}

    <div class="container">
        <div class="row float-element">

            <div class="bm-pd-lg">
                <h3 class="blue">账户设置</h3>
                <hr>
                {% for error in errors %}
                    <div class="alert alert-danger">{{ error }}</div>
                {% endfor %}
                <form class="form-horizontal" method="post" enctype="multipart/form-data">
                    {{ form.csrf_token }}
                    <div class="form-group">
                        <label class="col-sm-2 control-label">头像</label>
                        <div class="col-sm-5">
                            <img class="avatar-lg circle rl-mg-md" src="{{ user.avatar }}"/>
                            <label class="btn btn-grey radius4 fileupload">
                                <input type="file" name="avatar"
                                       onchange="$('#avatar-upload-btn').html('选择'); $('#avatar-upload-msg').show()"/>
                                <span id="avatar-upload-btn">选择</span>
                            </label>
                            <button id="avatar-upload-msg" type="submit" class="btn btn-blue" style="display:none">
                                上传
                            </button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-2 control-label">评课社区用户名</label>
                        <div class="col-sm-5">
                            <input type="text" class="form-control" value="



                                    {% if form.username.data %}{{ form.username.data }}{% else %}{{ user.username }}{% endif %}"
                                   name="username">
                            <span class="help-block" style="display:none"></span>
                            {% if form.errors.get('username') %}
                                {% for info in form.errors.get('username') %}
                                    {{ info }}
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>


                    <div class="form-group">
                        <label class="col-sm-2 control-label">交大邮箱</label>
                        <div class="col-sm-5">
                            <input type="text" class="form-control" value="{{ user.email }}" disabled>
                        </div>
                    </div>

                    <div class="form-group">
                        <a class="col-sm-2 control-label"
                           href="https://xjtu.live/u/{{ user.xjtumen_username }}">交大門用户主页</a>
                        <div class="col-sm-5">
                            <input type="text" class="form-control"
                                   value="https://xjtu.live/u/{{ user.xjtumen_username }}" disabled>
                        </div>
                    </div>


                    <div class="form-group">
                        <label for="inputDescription" class="col-sm-2 control-label">个人简介</label>
                        <div class="col-sm-5">
                            <textarea type="text" class="form-control" rows="3" id="inputDescription" name="description"
                                    {% if form.description.data %}>{{ form.description.data }}{% else %}
                                        placeholder="还没有自我介绍">{% endif -%}</textarea>
                            <span class="help-block" style="display:none"></span>
                            {% if form.errors.get('description') %}
                                {% for info in form.errors.get('description') %}
                                    {{ info }}
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>


                    <div class="form-group">
                        <label class="col-sm-2 control-label">个人主页</label>
                        <div class="col-sm-5">
                            <input type="text" class="form-control" name="homepage" {% if form.homepage.data %}
                                   value="{{ form.homepage.data }}"{% else %}placeholder="博客"{% endif %}>
                            <span class="help-block" style="display:none"></span>
                            {% if form.errors.get('homepage') %}
                                {% for info in form.errors.get('homepage') %}
                                    {{ info }}
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>


                    <div class="form-group">
                        <label class="col-sm-2 control-label">隐私设置</label>
                        <div class="col-sm-5">
                            <div>
                                <input {% if user.is_following_hidden %}checked{% endif %} id="is_following_hidden"
                                       name="is_following_hidden" type="checkbox" value="1">
                                <label for="is_following_hidden">隐藏关注的人、关注的课程、学过的课程</label>
                            </div>
                            <div>
                                <input {% if user.is_profile_hidden %}checked{% endif %} id="is_profile_hidden"
                                       name="is_profile_hidden" type="checkbox" value="1">
                                <label for="is_profile_hidden">彻底隐藏个人主页</label>
                            </div>
                        </div>
                    </div>


                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-2">
                            <button type="submit" class="btn btn-blue btn-block">更新资料</button>
                        </div>
                    </div>
                </form>
            </div>

        </div> <!-- end float-element -->
    </div> <!-- end container -->

{% endblock %}
